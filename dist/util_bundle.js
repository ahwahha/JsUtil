(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t){if(this._entity=null,null!=t){if("string"==typeof t)return n.get(t);if(t instanceof HTMLElement)return this._entity=t,this;if(t instanceof n)return t}}function r(t=null,e=null){let o,i,a,l,s,d,c,p=t instanceof n?t:new n(t),u=null,h=null,y=!1,f=!1,g=!1,w=!1,m=0,x={label:"",columns:[{header:"Header",data:"",filter:"",filterPlaceholder:"---",headerStyle:{},filterStyle:{},rowsStyle:{},sortable:!0,filterEditable:!0,class:""}],sortedBy:"###row-index",ascending:!0,start:1,defaultStart:1,end:10,defaultEnd:10,maxRows:100,tableClass:"",buttonClass:"",headersClass:"",filtersClass:"",actionsGroupClass:"actionsGroup",showSelectingGroup:!0,multiSelect:!0,actionsGroupStyle:{},maxHeight:void 0,selectAllFiltered:"(Un)Select all filtered",selectAllInserted:"(Un)Select all inserted",selectAllEdited:"(Un)Select all edited",removeAllFiltered:"(Un)Remove all filtered",noOfSelected:"No. of selected: ",noOfEdited:"No. of edited: ",resetFilters:"Reset filters",resetData:"Reset data",resetSelectedData:"Reset selected data",editFilter:"Edit filter value:",toBegining:"<<",previousPage:n.create("span",{style:"padding:0px 8px;"}).appendContent("<"),nextPage:n.create("span",{style:"padding:0px 8px;"}).appendContent(">"),toEnding:">>",headersStyle:{position:"relative","border-radius":"5px",border:"hsl(0, 0%, 75%) solid 1px",height:"calc(100% - 8px)",display:"flex","flex-flow":"column nowrap",padding:"3px",margin:"1px","text-align":"center","font-weight":"bold","background-color":"hsl(180, 50%, 90%)","white-space":"nowrap"},filtersStyle:{width:"calc(100% - 2px)","border-radius":"5px",border:"hsl(0, 0%, 75%) solid 1px",margin:"1px","text-align":"center","font-size":"11px",overflow:"hidden",cursor:"help"},rowsStyle:{"text-align":"center"},oddRowsStyle:{},evenRowsStyle:{"background-color":"hsl(0, 0%, 95%)"},editedStyle:{display:"revert",color:"hsl(0, 100%, 30%)","font-size":"11px",height:"13px",width:"100%",resize:"none",border:"none",outline:"none",background:"none"},insertedStyle:{"background-image":"linear-gradient(to bottom, hsla(0, 0%, 100%, 0), hsla(0, 0%, 100%, 0), hsla(0, 0%, 100%, 0), hsla(0, 0%, 100%, 0), hsla(0, 0%, 100%, 0), hsla(160, 90%, 50%, 0.03), hsla(160, 90%, 50%, 0.05), hsla(160, 90%, 50%, 0.1), hsla(160, 90%, 50%, 0.15), hsla(160, 90%, 50%, 0.25), hsla(160, 90%, 50%, 0.5))"},removedStyle:{"text-decoration":"line-through","text-decoration-color":"hsl(0, 80%, 50%)","background-image":"linear-gradient(to bottom, hsla(0, 0%, 100%, 0), hsla(0, 0%, 100%, 0), hsla(0, 0%, 100%, 0), hsla(0, 0%, 100%, 0), hsla(0, 0%, 100%, 0), hsla(0, 30%, 50%, 0.03), hsla(0, 30%, 50%, 0.05), hsla(0, 30%, 50%, 0.1), hsla(0, 30%, 50%, 0.15), hsla(0, 30%, 50%, 0.25), hsla(0, 30%, 50%, 0.5))"},filterDebounce:500,multiClickDebounce:250,shieldRefreshGap:100,filterFunction:function(t,e){try{return null!=t&&("boolean"==typeof t?""==e.trim()||n.matchText(String(t),e.trim(),"`",!1,d.emptyRepresentation):isNaN(t)?L(t)?""==e.trim()||n.match(t,e.trim(),"`",v)||n.matchText(String(t),e.trim(),"`",!1,d.emptyRepresentation):""==e.trim()||n.matchText("object"==typeof t?JSON.stringify(t):String(t),e.trim(),"`",!1,d.emptyRepresentation):""==e.trim()||n.match(t,e.trim(),"`",b)||n.matchText(String(t),e.trim(),"`",!1,d.emptyRepresentation))}catch(r){return""==e.trim()||n.matchText("object"==typeof t?JSON.stringify(t):String(t),e.trim(),"`",!1,d.emptyRepresentation)}},controlGroupEventHandlers:[],tableBodyEventHandlers:[],paginationGroupEventHandlers:[],onrefresh:null,emptyRepresentation:"___"},b=function(t,e){if(isNaN(t))throw"@ filterNumber: NaN";if(e!==d.emptyRepresentation||null!=t&&""!=t.trim()){let n=e.trim(),r=n.substring(1).trim(),o=n.substring(2).trim();return n.startsWith("<")&&!isNaN(r)?t<parseFloat(r):n.startsWith("<=")&&!isNaN(o)?t<=parseFloat(o):n.startsWith("=")&&!isNaN(r)?t==parseFloat(r):n.startsWith(">=")&&!isNaN(o)?t>=parseFloat(o):n.startsWith(">")&&!isNaN(r)?t>parseFloat(r):Sting(t).trim().indexOf(n)}return!0},v=function(t,e){if(e!==d.emptyRepresentation||null!=t&&""!=t.trim()){let n=t.trim(),r=e.trim(),o=r.substring(1).trim(),i=r.substring(2).trim();return r.startsWith("<")&&L(o)?M(n)<M(o):r.startsWith("<=")&&L(i)?M(n)<=M(i):r.startsWith("=")&&L(o)?M(n)==M(o):r.startsWith(">=")&&L(i)?M(n)>=M(i):r.startsWith(">")&&L(o)?M(n)>M(o):Sting(t).trim().indexOf(r)}return!0},C=function(){try{return u=n.clone(h),g=!1,this}catch(t){throw new Error("error caught @ resetData(): "+t)}},S=function(t){try{return null!=u&&Array.isArray(u)&&(u=u.map((e=>e["###row-filtered"]?{...e,"###row-selected":!e["###row-removed"]&&t}:e))),this}catch(e){throw new Error("error caught @ setAllFilteredSelected("+t+"): "+e)}},A=function(t){try{return null!=u&&Array.isArray(u)&&(u=u.map((e=>e["###row-edited"]?{...e,"###row-selected":!e["###row-removed"]&&t}:e))),this}catch(e){throw new Error("error caught @ setAllFilteredSelected("+t+"): "+e)}},E=function(t){try{return null!=u&&Array.isArray(u)&&(u=u.map((e=>e["###row-inserted"]?{...e,"###row-selected":!e["###row-removed"]&&t}:e))),this}catch(e){throw new Error("error caught @ setAllInsertedSelected("+t+"): "+e)}},k=function(t){try{return null!=u&&Array.isArray(u)&&(u=u.map((e=>e["###row-filtered"]?{...e,"###row-removed":t}:e))),this}catch(e){throw new Error("error caught @ setAllFilteredRemoved("+t+"): "+e)}},j=function(t,e){try{if(null!=t&&Array.isArray(t)){let r=[];for(let o of t)e(o)&&r.push(n.clone(o));return r}return null}catch(n){throw new Error("error caught @ deepFilter("+t+", "+e+"): "+n)}},T=function(t){try{if(null!=(t=t||u)&&Array.isArray(t)){g=!1;for(let e=0;e<t.length;e++){let n=t[e],r=h.find((t=>t["###row-index"]===n["###row-index"])),o=!1;for(let t in n)if(!t.startsWith("###row-")&&!t.startsWith("###ori-")&&("object"==typeof n[t]?JSON.stringify(n[t]):n[t])!=("object"==typeof r[t]?JSON.stringify(r[t]):r[t])){o=!0;break}n["###row-edited"]=o,g=!(!g&&!o)}}return this}catch(t){throw new Error("error caught @ setEdited(): "+t.toString())}},H=function(t=!0,e){try{return null!=(e=e||u)&&Array.isArray(e)?j(e,(e=>t?e["###row-selected"]:!e["###row-selected"])):null}catch(t){throw new Error("error caught @ getSelected(): "+t.toString())}},N=function(t=!0,e){try{return null!=(e=e||u)&&Array.isArray(e)?j(e,(e=>t?e["###row-filtered"]:!e["###row-filtered"])):null}catch(t){throw new Error("error caught @ getFiltered(): "+t.toString())}},O=function(t=!0,e){try{if(null!=(e=e||u)&&Array.isArray(e)){T(e);let n=j(j(j(e,(e=>t?e["###row-edited"]:!e["###row-edited"])),(t=>!t["###row-removed"])),(t=>!t["###row-inserted"])),r=[];for(let t of n){let e={ori:{},current:{},index:t["###row-index"]};for(let n of Object.keys(t))n.startsWith("###")||(e.ori[n]=t.hasOwnProperty("###ori-"+n)?t["###ori-"+n]:t[n],e.current[n]=t[n]);r.push(e)}return r}return null}catch(t){throw new Error("error caught @ getEdited(): "+t.toString())}},_=function(){try{return null!=u&&Array.isArray(u)&&u.forEach((t=>{if(null!=d.columns&&Array.isArray(d.columns)){let e=!0;for(let n of d.columns){let r=null==t[n.data]?"":"object"==typeof t[n.data]?JSON.stringify(t[n.data]):t[n.data],o=null==n.filter?"":"object"==typeof n.filter?JSON.stringify(n.filter):n.filter;if(!d.filterFunction(r,o)){e=!1;break}}t["###row-filtered"]=e}})),this}catch(t){throw new Error("error caught @ filterRows(): "+t)}},R=function(t,e){return d.sortedBy=t,d.ascending=e,this},L=function(t){try{return!isNaN(M(t))}catch(e){throw new Error("error caught @ isDateString("+t+"): "+e)}},M=function(t){try{return new Date(t).getTime()}catch(t){return NaN}},D=function(t){try{let e=parseInt(t);return Number.isNaN(e)||(d={...d,start:Math.max(Math.min(e,d.end),Math.max(0===N().length?0:1,d.end-d.maxRows+1))}),this}catch(e){throw new Error("error caught @ setStart("+t+") - "+e)}},F=function(t){try{let e=parseInt(t);return Number.isNaN(e)||(d={...d,end:Math.min(Math.max(e,d.start),Math.min(N().length,d.start+d.maxRows-1))}),this}catch(e){throw new Error("error caught @ setEnd("+t+") - "+e)}},B=function(t,e){try{return null!=d&&null!=d.columns&&Array.isArray(d.columns)&&(d.columns[t].filter=e),this}catch(n){throw new Error("error caught @ setFilter("+t+", "+e+") - "+n)}},I=function(){let t=null;try{let r=n.create("tbody",null),p=async function(t){await W(),R(t.data,d.sortedBy===t.data?!d.ascending:d.ascending),z()},m=async function(t){let e=Array.isArray(d.sortedBy)?d.sortedBy:[d.sortedBy];e=e.includes(t.data)?e.filter((e=>e!=t.data)):[...new Set([...e,t.data])],await W(),R(e,d.ascending),z()},x=async function(){await W(),R(void 0,d.ascending),z()};try{if(null!=d.columns&&Array.isArray(d.columns)){let t=n.create("tr",{class:d.headersClass});d.columns.forEach((r=>{let o={...d.headersStyle||{},...r.headerStyle||{}};t.appendContent(n.create("td",{class:r.class}).appendContent(n.create("div",{tabindex:"0",style:n.objToStyle(o),class:d.tableClass+" sort-header "+(d.sortedBy===r.data?"sorting":"")}).appendContent(n.create("div",{style:"flex:1;"})).appendContent(r.header+((Array.isArray(d.sortedBy)?d.sortedBy:[d.sortedBy]).includes(r.data)?d.ascending?"▲":"▼":"")).appendContent(n.create("div",{style:"flex:1;"})).appendContent(n.create("div",{style:"position:absolute; left: 0px; top: 0px; width: 100%; height:100%; z-index: 999;"}).countClicks([async function(t){r.sortable&&(console.log(e),e&&e.keys&&1==e.keys.length&&"Control"==e.keys[0]?await m(r):await p(r))},async function(t){r.sortable&&await m(r)},async function(t){await x()}],d.multiClickDebounce))))})),r.appendContent(t)}}catch(t){throw"@ headers: "+t}try{if(null!=d.columns&&Array.isArray(d.columns)){let t;c=n.create("tr",{class:d.filtersClass}),d.columns.forEach((e=>{let r=n.objToStyle({...{...d.filtersStyle||{},...e.filterStyle||{}},...e.filterEditable?{}:{"background-color":"#DDD"}}),o=e.filter||"";e.filterElement=n.create("input",{style:"display:block; "+r,value:o,placeholder:e.filterPlaceholder||"",...e.filterEditable?{}:{disabled:"true"}}).addEventHandler("dblclick",(e=>{e.preventDefault(),n.get("html")[0].appendContent(t=n.create("div",{style:n.objToStyle({position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%","z-index":"9998","background-color":"hsla(0, 100%, 0%, 0.1)",display:"flex","flex-flow":"column nowrap","justify-content":"center","align-items":"center"})}).appendContent(n.create("textarea",{style:"padding:10px; background-color:#FFF; width:800px; height:430px; border:1px solid #AAA;"}).appendContent('Filtering Guide:\n\n1. Type Boolean\n    \'true\' / \'false\'\n\n2. Type Numbers\n    [ < / <= / = / > / >= ][number string]\n    e.g. <100\n\n3. Type Dates\n    [ < / <= / = / > / >= ][ dd-MM-yyyy / yyyy-MM-dd / yyyy-MM-dd hh:mm / yyyy-MM-dd hh:mm:ss]\n    e.g. >=01-07-1997\n\n4. Type Text\n    [ any successive characters / double quoted characters (e.g. "mango tart") ]\n\n5. Combined conditions ( single type only )\n    String Separator: Space " " ( AND operator )\n    Delimiter: Backtick "`" ( NOT operator )\n    Condition:\n        [ Space-separated conditions to be included ] ` [ Space-separated conditions to be excluded ]\n        e.g. apple pear ` tart\n    Multiple Conditions:\n        multiple conditions separate by double backticks "``" ( OR operator ).\n        e.g. apple pear ` tart `` "mango tart" [ ... `` other conditions ]\n')).appendContent(n.create("span",{style:"margin-top: 20px; background-color: #fff; padding: 5px;"}).appendContent("Click to close")).appendContent(n.create("span",{style:n.objToStyle({position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%","z-index":"9999"})}).addEventHandler("click",(e=>{e.preventDefault(),t.remove()}))))})),c.appendContent(n.create("td",{class:e.class}).appendContent(e.filterElement))})),r.appendContent(c)}}catch(t){throw"@ filters: "+t}try{let t=d.start,e=d.end,o=N();null!=o&&Array.isArray(o)&&null!=d.columns&&Array.isArray(d.columns)&&o.slice(t-1,e).forEach(((t,e)=>{try{let o=t=>({...d.rowsStyle||"",...t.rowsStyle||""}),i=e%2==1?d.evenRowsStyle:d.oddRowsStyle,a=null;if(t["###row-removed"])try{a=n.create("tr",{style:n.objToStyle({...i,...d.removedStyle})}),d.columns.forEach((e=>{try{let r=void 0!==t[e.data]?"object"==typeof t[e.data]?JSON.stringify(t[e.data]):String(t[e.data]):"";if("###row-removed"===e.data){if("function"==typeof e.modifier){let n=Object.assign({},t);r=e.modifier(n)}}else"###row-selected"===e.data&&(r="");a.appendContent(n.create("td",{class:e.class,style:n.objToStyle(o(e))}).appendContent(n.create("span").appendContent(r)))}catch(t){throw"@ col['data'] = "+e.data+": "+t}}))}catch(t){throw"@ ###row-removed: "+t}else try{a=n.create("tr",{style:n.objToStyle({...i,...t["###row-inserted"]?d.insertedStyle:{}})}),d.columns.forEach((e=>{let r,i=null!=t[e.data]?"object"==typeof t[e.data]?JSON.stringify(t[e.data]):String(t[e.data]):"",l=t["###ori-"+e.data];if(e.modifier)try{if("function"==typeof e.modifier){let n=Object.assign({},t);i=e.modifier(n)}}catch(t){throw"@ col.modifier: "+t}let s=t["###row-edited"]&&void 0!==l;a.appendContent(n.create("td",{class:e.class,style:n.objToStyle(o(e))}).appendContent(i).appendContentIf(n.create("br"),s).appendContentIf(r=n.create("textarea",{style:n.objToStyle({...o(e),...d.editedStyle})}).attr("readonly","").appendContent("("+("string"==typeof l?'"'+l+'"':JSON.stringify(l))+")").addEventHandler(["focus","blur"],(()=>{r.css("height","0px").css("height",r.entity().scrollHeight+2+"px")})),s))}))}catch(t){throw"@ not ###row-removed: "+t}r.appendContent(a)}catch(t){throw"@ index "+e+", content: "+t}}))}catch(t){throw"@ rows: "+t}try{o=t=n.create("div",{style:n.objToStyle({position:"relative",width:"100%",display:"flex","flex-flow":"column nowrap","justify-content":"flex-start","align-items":"center","row-gap":"3px","background-color":"#fff"})}).appendContent(n.create("div",{style:n.objToStyle({width:"100%;"})}).appendContent(d.label)).appendContent(a=n.create("div",{style:n.objToStyle({width:"100%",display:"flex","flex-flow":"row wrap-reverse","justify-content":"flex-start","align-items":"flex-start","column-gap":"3px"})}).appendContent(s=function(){let t=null;if(null!=u&&Array.isArray(u)&&null!=d)try{t=n.create("div",{style:n.objToStyle({"text-align":"left"})}).appendContent(n.create("div",{style:n.objToStyle({display:"flex","flex-flow":"row wrap","justify-content":"flex-start","align-items":"center","column-gap":"3px"})}).appendContent(n.create("div").appendContent(n.create("span",{style:"position: relative; border: 1px solid #AAAAAA;",class:d.tableClass+" "+d.buttonClass}).addEventHandler("click",(async t=>{await W(),function(){try{let t=d.end-d.start+1;return d.start=0===N().length?0:1,d.end=Math.min(N().length,d.start+t-1),this}catch(t){throw new Error("error caught @ toBegining() - "+t)}}(),z()})).appendContent(d.toBegining).appendContent(n.create("span",{style:"position: absolute; left: 0px; top: 0px; width:100%; height:100%;"}))).appendContent(n.create("span",{style:"position: relative; border: 1px solid #AAAAAA; margin-left:5px;",class:d.tableClass+" "+d.buttonClass}).addEventHandler("click",(async t=>{await W(),function(){try{if(null!=u&&Array.isArray(u)&&null!=d){let t=d.end-d.start+1;d.start=Math.max(0===N().length?0:1,d.start-t),d.end=Math.min(u.length,d.start+t-1)}return this}catch(t){throw new Error("error caught @ priviousPage() - "+t)}}(),z()})).appendContent(d.previousPage).appendContent(n.create("span",{style:"position: absolute; left: 0px; top: 0px; width:100%; height:100%;"})))).appendContent(n.create("div").appendContent(n.create("input",{type:"text",style:n.objToStyle({"text-align":"center",padding:"3px 8px",width:8*Math.max(1,Math.ceil(Math.log10(u.length+1)))+20+"px"}),value:d.start}).addEventHandler("change",(async t=>{await W(),D(t.target.value),z()}))).appendContent(n.create("span",{style:"margin: 0px 5px;"}).appendContent("-")).appendContent(n.create("input",{type:"text",style:n.objToStyle({"text-align":"center",padding:"3px 8px",width:8*Math.max(1,Math.ceil(Math.log10(u.length+1)))+20+"px"}),value:d.end}).addEventHandler("change",(async t=>{await W(),F(t.target.value),z()}))).appendContent(n.create("span",{style:"margin: 0px 5px;"}).appendContent("/")).appendContent(N().length)).appendContent(n.create("div").appendContent(n.create("span",{style:"position: relative; border: 1px solid #AAAAAA;",class:d.tableClass+" "+d.buttonClass}).addEventHandler("click",(async t=>{await W(),function(){try{if(null!=d){let t=d.end-d.start+1;d.end=Math.min(N().length,d.end+t),d.start=Math.max(1,d.end-t+1)}return this}catch(t){throw new Error("error caught @ nextPage() - "+t)}}(),z()})).appendContent(d.nextPage).appendContent(n.create("span",{style:"position: absolute; left: 0px; top: 0px; width:100%; height:100%;"}))).appendContent(n.create("span",{style:"position: relative; border: 1px solid #AAAAAA; margin-left:5px;",class:d.tableClass+" "+d.buttonClass}).preventDefault("click").addEventHandler("click",(async t=>{await W(),function(){try{if(null!=d){let t=d.end-d.start+1;d.end=N().length,d.start=Math.max(1,d.end-t+1)}return this}catch(t){throw new Error("error caught @ priviousPage() - "+t)}}(),z()})).appendContent(d.toEnding).appendContent(n.create("span",{style:"position: absolute; left: 0px; top: 0px; width:100%; height:100%;"})))))}catch(t){throw new Error("error caught @ createPaginationGroup() - "+t)}return t}()).appendContent(n.create("div",{style:"flex:1"})).appendContent(n.create("div",{style:n.objToStyle(d.actionsGroupStyle)}).appendContent(n.create("div",{style:n.objToStyle({display:"flex","flex-flow":(g?"column":"row")+" wrap","justify-content":"flex-start","align-items":"flex-end","column-gap":"3px"})}).appendContentIf(function(){let t=null;try{if(null!=u&&Array.isArray(u)){let e=u.filter((t=>t["###row-selected"])).length;t=n.create("div",{style:n.objToStyle({display:"flex","flex-flow":"row wrap","justify-content":"flex-start","align-items":"center","column-gap":"3px"})}).appendContent(n.create("div",e>0?{}:{style:"display:none"}).appendContent(d.noOfSelected+e.toString()),1==d.multiSelect&&y).appendContent(n.create("div",{style:n.objToStyle({display:"flex","flex-flow":"row wrap","justify-content":"flex-start","align-items":"center","column-gap":"3px"})}).appendContentIf(n.create("span",{style:"position: relative; border: 1px solid #AAAAAA;",class:d.tableClass+" "+d.buttonClass}).countClicks([async t=>{await W(),S(!0),z()},async t=>{await W(),S(!1),z()}],d.multiClickDebounce).appendContent(d.selectAllFiltered).appendContent(n.create("span",{style:"position: absolute; left: 0px; top: 0px; width:100%; height:100%;"})),y).appendContentIf(n.create("span",{style:"position: relative; border: 1px solid #AAAAAA;",class:d.tableClass+" "+d.buttonClass}).countClicks([async t=>{await W(),A(!0),z()},async t=>{await W(),A(!1),z()}],d.multiClickDebounce).appendContent(d.selectAllEdited).appendContent(n.create("span",{style:"position: absolute; left: 0px; top: 0px; width:100%; height:100%;"})),g).appendContentIf(n.create("span",{style:"position: relative; border: 1px solid #AAAAAA;",class:d.tableClass+" "+d.buttonClass}).countClicks([async t=>{await W(),E(!0),z()},async t=>{await W(),E(!1),z()}],d.multiClickDebounce).appendContent(d.selectAllInserted).appendContent(n.create("span",{style:"position: absolute; left: 0px; top: 0px; width:100%; height:100%;"})),w),1==d.multiSelect&&y).appendContentIf(n.create("span",{style:"position: relative; border: 1px solid #AAAAAA;",class:d.tableClass+" "+d.buttonClass}).countClicks([async t=>{await W(),k(!0),z()},async t=>{await W(),k(!1),z()}],d.multiClickDebounce).appendContent(d.removeAllFiltered).appendContent(n.create("span",{style:"position: absolute; left: 0px; top: 0px; width:100%; height:100%;"})),f)}return t}catch(t){throw new Error("error caught @ createSelectingGroup() - "+t)}}(),d.showSelectingGroup).appendContent(function(){let t=null;if(null!=u&&Array.isArray(u)&&null!=d)try{let e=u.filter((t=>t["###row-edited"])).length;t=n.create("div",{style:n.objToStyle({display:"flex","flex-flow":"row wrap","justify-content":"flex-start","align-items":"center","column-gap":"3px"})}).appendContentIf(d.noOfEdited+e,g).appendContentIf(n.create("div",{style:n.objToStyle({display:"flex","flex-flow":"row wrap","justify-content":"flex-start","align-items":"center","column-gap":"3px"})}).appendContent(n.create("span",{style:"position: relative; border: 1px solid #AAAAAA;",class:d.tableClass+" "+d.buttonClass}).addEventHandler("click",(async t=>{await W(),C(),z()})).appendContent(d.resetData).appendContent(n.create("span",{style:"position: absolute; left: 0px; top: 0px; width:100%; height:100%;"}))).appendContent(n.create("span",{style:"position: relative; border: 1px solid #AAAAAA;",class:d.tableClass+" "+d.buttonClass}).addEventHandler("click",(async t=>{await W(),function(){try{let t=O(!0,H(!0));for(let e of t){let t=h.find((t=>t["###row-index"]===e.index));u=u.map((n=>n["###row-index"]===e.index?{...t}:n))}return T(),this}catch(t){throw new Error("error caught @ resetSelectedData(): "+t)}}(),z()})).appendContent(d.resetSelectedData).appendContent(n.create("span",{style:"position: absolute; left: 0px; top: 0px; width:100%; height:100%;"}))),g)}catch(t){throw new Error("error caught @ createSelectingGroup() - "+t)}return t}()).appendContent(function(){let t=null;if(null!=d)try{t=n.create("span",{style:"position: relative; border: 1px solid #AAAAAA;",class:d.tableClass+" "+d.buttonClass}).addEventHandler("click",(async t=>{await W(),function(){try{return null!=d&&null!=d.columns&&Array.isArray(d.columns)&&d.columns.forEach((t=>{t.filter=t["ori-filter"]})),this}catch(t){throw new Error("error caught @ resetFilters() - "+t)}}(),_(),z(!0)})).appendContent(d.resetFilters).appendContent(n.create("span",{style:"position: absolute; left: 0px; top: 0px; width:100%; height:100%;"}))}catch(t){throw new Error("error caught @ createResetFiltersButton() - "+t)}return t}())))).appendContent(l=n.create("div",{style:"width:100%;overflow:auto;"+(d.maxHeight?" max-height:"+d.maxHeight+";":"")}).appendContent(n.create("table",{style:n.objToStyle({width:"100%",height:"min-content","border-collapse":"collapse"})}).appendContent(r))).css("position","relative").appendContent(i=n.create("span",{style:"position:absolute; left: 0px; top: 0px; width: 100%; height:100%; z-index: 999; display:none;"}).css("background-color","hsla(0, 100%, 0%, 0.1)"))}catch(t){throw"@ output: "+t}}catch(t){throw new Error("error caught @ createTable(): "+t)}return t},z=function(t=!1){try{return null!=p&&(function(){try{let t=Array.isArray(d.sortedBy)?d.sortedBy:[d.sortedBy],e=d.ascending;if(null!=u&&Array.isArray(u)&&t.length>0){let n=null;for(let r of[...t].reverse())n=u.sort(((t,n)=>{if(null==t[r]||null==n[r])return null==t[r]&&null==n[r]?0:e?null==t[r]?1:-1:null==t[r]?-1:1;if("boolean"==typeof t[r]&&"boolean"==typeof n[r])return t[r]==n[r]?0:e?t[r]?1:-1:t[r]?-1:1;if(""!=t[r]&&""!=n[r]&&!isNaN(t[r])&&!isNaN(n[r]))return parseFloat(t[r])==parseFloat(n[r])?0:e?parseFloat(t[r])-parseFloat(n[r]):parseFloat(n[r])-parseFloat(t[r]);if("object"==typeof t[r]&&"object"==typeof n[r]){let o=JSON.stringify(t[r]),i=JSON.stringify(n[r]);return o==i?0:e?o-i:i-o}{let o=String(t[r]),i=String(n[r]);if(!L(o)||!L(i))return e?o.localeCompare(i):i.localeCompare(o);{console.log();let t=M(o),n=M(i);if(!isNaN(t)&&!isNaN(n))return e?t-n:n-t}}return 0}));u=n}return this}catch(t){throw new Error("error caught @ sort("+d.sortedBy+", "+order+"): "+t)}}(),_(),t&&function(){try{if(null!=d){let t=d.end-d.start+1,e=0===N().length?0:1,n=Math.max(t,d.defaultEnd);d.start=e,d.end=n,D(e),F(n)}return this}catch(t){throw new Error("error caught @ resetPageNumbers() - "+t)}}(),p.clear().appendContent(I()),P(),"function"==typeof d.onrefresh&&d.onrefresh()),this}catch(t){throw new Error("error caught @ refreshTable(): "+t)}},P=function(){let t=["keyup","dragend"];if(null!=d.columns&&Array.isArray(d.columns))for(let e of d.columns){let n=e.filterElement;n&&n.addEventHandler(t,(()=>{B(d.columns.indexOf(e),n.entity().value),c.debounce((t=>{let r=n.entity().selectionStart,o=n.entity().selectionEnd;_(),z(!0);let i=d.columns[d.columns.indexOf(e)].filterElement.entity();n.entity(i),i.setSelectionRange(r,o),i.focus()}),d.filterDebounce)}))}if(null!=d.controlGroupEventHandlers&&Array.isArray(d.controlGroupEventHandlers))for(let t of d.controlGroupEventHandlers)a.addEventHandler(t.event,t.function);if(null!=d.tableBodyEventHandlers&&Array.isArray(d.tableBodyEventHandlers))for(let t of d.tableBodyEventHandlers)a.addEventHandler(t.event,t.function);if(null!=d.paginationGroupEventHandlers&&Array.isArray(d.paginationGroupEventHandlers))for(let t of d.paginationGroupEventHandlers)a.addEventHandler(t.event,t.function)},W=async function(){try{i.show()}catch(t){}finally{await n.deferExec(d.shieldRefreshGap)}return this};return{setData:function(t){try{return g=!1,null!=t&&(t.forEach(((t,e)=>{t["###row-index"]=e+1,t["###row-filtered"]=!0,t["###row-selected"]=!1,t["###row-edited"]=!1,t["###row-inserted"]=!1,t["###row-removed"]=!1})),u=t,h=n.clone(t)),this}catch(e){throw new Error("error caught @ setData("+t+"): "+e)}},getData:function(){try{return u}catch(t){throw new Error("error caught @ getData(): "+t.toString())}},resetData:C,insertData:function(t){try{if(w=!0,null!=u&&Array.isArray(u)){if(Array.isArray(t))t.forEach((t=>{let e={...t,"###row-index":-1*++m,"###row-filtered":!1,"###row-selected":!1,"###row-edited":!1,"###row-inserted":!0,"###row-removed":!1};u.push(e),h.push(n.clone(e))}));else{let e={...t,"###row-index":-1*++m,"###row-filtered":!1,"###row-selected":!1,"###row-edited":!1,"###row-inserted":!0,"###row-removed":!1};u.push(e),h.push(n.clone(e))}g=!0,T()}return this}catch(t){throw new Error("error caught @ insertData(): "+t)}},setTableSettings:function(t){try{d={...x,...t},d.headersStyle={...x.headersStyle,...t.headersStyle},d.filtersStyle={...x.filtersStyle,...t.filtersStyle},d.rowsStyle={...x.rowsStyle,...t.rowsStyle},d.oddRowsStyle={...x.oddRowsStyle,...t.oddRowsStyle},d.evenRowsStyle={...x.evenRowsStyle,...t.evenRowsStyle},d.editedStyle={...x.editedStyle,...t.editedStyle},d.insertedStyle={...x.insertedStyle,...t.insertedStyle},d.removedStyle={...x.removedStyle,...t.removedStyle};for(let t=0;t<d.columns.length;t++)d.columns[t]={...x.columns[0],...d.columns[t]},d.columns[t]["ori-filter"]=d.columns[t].filter;return this}catch(e){throw new Error("error caught @ setTableSettings("+t+"): "+e)}},getTableSettings:function(){return d},sortAsOriginal:function(){try{return R("###row-index",!0),this}catch(t){throw new Error("error caught @ sortAsOriginal(): "+t)}},getSelected:H,getFiltered:N,getEdited:O,getInserted:function(t=!0,e){try{if(null!=(e=e||u)&&Array.isArray(e)){let n=j(j(e,(e=>t?e["###row-inserted"]:!e["###row-inserted"])),(t=>!t["###row-removed"]));return r.cleanKeys(n)}return null}catch(t){throw new Error("error caught @ getInserted(): "+t.toString())}},getRemoved:function(t=!0,e){try{if(null!=(e=e||u)&&Array.isArray(e)){let n=j(j(e,(e=>t?e["###row-removed"]:!e["###row-removed"])),(e=>!t||!e["###row-inserted"]));for(let t of n)for(let e of Object.keys(t))!e.startsWith("###ori-")&&t["###ori-"+e]&&(t[e]=t["###ori-"+e]);return r.cleanKeys(n)}return null}catch(t){throw new Error("error caught @ getRemoved(): "+t.toString())}},createSelectBox:function(t){try{return y||(y=!0),n.create("input",{type:"checkbox",...t["###row-selected"]?{checked:""}:{}}).addEventHandler("click",(async e=>{await W(),"boolean"!=typeof d.multiSelect||d.multiSelect||function(t){try{return null!=u&&Array.isArray(u)&&(u=u.map((e=>({...e,"###row-selected":!e["###row-removed"]&&t})))),this}catch(t){throw new Error("error caught @ setAllSelected(false): "+t)}}(!1),function(t,e){try{return null!=u&&Array.isArray(u)&&(u=u.map((n=>n["###row-index"]===t?{...n,"###row-selected":e}:n))),this}catch(n){throw new Error("error caught @ setSelected("+t+", "+e+"): "+n)}}(t["###row-index"],e.target.checked),z()}))}catch(e){throw new Error("error caught @ createSelectBox("+t+"): "+e)}},createRemoveBox:function(t){try{return f||(f=!0),n.create("input",{type:"checkbox",...t["###row-removed"]?{checked:""}:{}}).addEventHandler("click",(async e=>{await W(),function(t,e){try{return null!=u&&Array.isArray(u)&&(u=u.map((n=>n["###row-index"]===t?{...n,"###row-removed":e,"###row-selected":!1}:n))),this}catch(e){throw new Error("error caught @ setRemoved("+t+", "+selected+"): "+e)}}(t["###row-index"],e.target.checked),z()}))}catch(e){throw new Error("error caught @ createRemoveBox("+t+"): "+e)}},editData:function(t,e,n){try{if(null!=u&&Array.isArray(u)){let r=u.find((e=>e["###row-index"]===t));("object"==typeof r[e]?JSON.stringify(r[e]):String(r[e]))!=("object"==typeof n?JSON.stringify(n):String(n))&&(void 0===r["###ori-"+e]?r["###ori-"+e]=r[e]||"":r["###ori-"+e]===n&&delete r["###ori-"+e],r[e]=n,T([r]))}return this}catch(r){throw new Error("error caught @ editData("+t+", "+e+", "+n+"): "+r)}},setContainer:function(t){return p&&p.clear(),p=t instanceof n?t:new n(t),this},refreshTable:z,shieldOn:W,shieldOff:function(){try{i.hide()}catch(t){}return this}}}t.r(e),t.d(e,{JsonTable:()=>r,Util:()=>n}),n.get=function(t){if("string"==typeof t){if(t.trim().startsWith("#"))return new n(document.querySelector(t));{let e=[];return document.querySelectorAll(t).forEach((t=>{e.push(new n(t))})),e}}return null},n.create=function(t,e){let r=document.createElement(t);if(null!=e&&"object"==typeof e)for(let t in e)e.hasOwnProperty(t)&&r.setAttribute(t,e[t]);return new n(r)},n.objToStyle=function(t){var e=null;try{e="";for(let n in t||{})e+=(e?" ":"")+n+":"+t[n]+";"}catch(e){throw new Error("error caught @ objToStyle("+t+"): "+e)}return e},n.styleToObj=function(t){var e=null;try{e={},t.split(";").forEach((function(t){if(t.trim()){var n=t.split(":"),r=n[0].trim(),o=n[1].trim();e[r]=o}}))}catch(e){throw new Error("error caught @ styleToObj("+t+"): "+e)}return e},n.clone=function(t){if(t instanceof n){let e=new n(t.entity());if(t._eventListenerList){e._eventListenerList=[];for(let n of t._eventListenerList)e.addEventHandler(n.type,n.listener,n.options)}return e}if(Array.isArray(t))return t.map(n.clone);if("object"==typeof t&&null!=t){if(t instanceof Node)return t;let e={};for(let r in t)t.hasOwnProperty(r)&&(e[r]=n.clone(t[r]));return e}return t},n.openBlob=function(t){let e=null;try{e=URL.createObjectURL(t),window.open(e,"_blank")}catch(t){console.error("Error opening blob:",t)}finally{e&&URL.revokeObjectURL(e)}},n.downloadBlob=function(t,e="filename"){let n=null;try{n=URL.createObjectURL(t);let r=document.createElement("a");r.href=n,r.download=e,document.body.appendChild(r),r.click(),r.remove()}catch(t){console.error("Error downloading blob:",t)}finally{n&&URL.revokeObjectURL(n)}},n.downloadBlob=function(t,e="data"){try{let n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)}catch(t){throw new Error("error caught @ downloadBlob: "+t)}},n.parseCsv=function(t,e=","){function n(t,e){const n=new RegExp(`(?:^|${e})("(?:[^"]+|"")*"|[^${e}]*)`,"g"),r=[];let o;for(;o=n.exec(t);)r.push(o[1].replace(/^\"|\"$/g,"").replace(/\"\"/g,'"'));return r}function r(t,e){const n={};for(let r=0;r<t.length;r++)n[t[r]]=e[r];return n}const o=function(t){const e=[];let n="",r=!1;for(let o=0;o<t.length;o++){const i=t[o],a=t[o+1];'"'===i?r&&'"'===a?(n+='"',o++):r=!r:r||"\n"!==i&&("\r"!==i||"\n"===a)?r||"\r"!==i||"\n"!==a?n+=i:(e.push(n),n="",o++):(e.push(n),n="")}return n&&e.push(n),e}(t),i=n(o[0],e),a=[];for(let t=1;t<o.length;t++){const l=r(i,n(o[t],e));a.push(l)}return a},n.objectArrayToCsv=function(t,e=",",n="\n"){let r="",o=Object.keys(t[0]).sort(((t,e)=>t.localeCompare(e)));return t.forEach((function(t){let i=o.map((e=>JSON.stringify(t[e]))).join(e);r+=(""==r?"":n)+i})),r=o.join(e)+n+r,r},n.downloadAsCsv=function(t,e="data.csv",r=","){try{if(t&&t.length>0){let o=n.objectArrayToCsv(t,r);n.downloadBlob(new Blob([o],{type:"text/csv"}),e)}}catch(t){throw new Error("error caught @ downloadAsCsv: "+t)}},n.loaded=function(t){null!=t&&"function"==typeof t&&document.addEventListener("DOMContentLoaded",t)},n.createFileElement=function(t="",e={}){let r,o,i,a=n.create("div").appendContent(r=n.create("div",{style:n.objToStyle({width:"calc(100% - 4px)",padding:"1px",border:"hsl(0 0 90) solid 1px","border-radius":"4px",display:"flex","flex-flow":"row nowrap","justify-content":"flex-start","align-items":"center",gap:"3px"}),...e.container||{}}).appendContent(o=n.create("input",{type:"file",name:t,style:n.objToStyle({width:"calc(100% - 30px)"}),...e.inputField||{}})).appendContent(i=n.create("div",{style:n.objToStyle({width:"30px",height:"20px",display:"flex","flex-flow":"row nowrap","justify-content":"center","align-items":"center","font-size":"15px","font-weight":"bold",cursor:"pointer",margin:"0px",padding:"0px",border:"1px solid #888888","border-radius":"3px",color:"#000000;","background-color":"#f3f3f3",outline:"none"}),...e.removeButton||{}}).appendContent("✕").addEventHandler("click",(t=>{a.remove()}))));return a.prop("container",r).prop("inputField",o).prop("removeButton",i)},n.createFileGroup=function(t="",e,r,o={}){let i,a={width:"100%",display:"flex","flex-flow":"column nowrap","justify-content":"flex-start","align-items":"flex-start"},l=n.create("div",{style:n.objToStyle(a)}),s=n.create("div",{style:n.objToStyle({display:"flex","flex-flow":"row nowrap","justify-content":"center","align-items":"center","font-size":"100%",cursor:"pointer",margin:"0px",padding:"0px 3px",border:"1px solid #888888","border-radius":"3px",color:"#000000;","background-color":"#f3f3f3",outline:"none"})}).appendContent("Add").addEventHandler("click",(e=>{(null==r||l.entity().children.length<r)&&l.appendContent(n.createFileElement(t,o).css("width","100%").css("padding-bottom","3px"))}));new MutationObserver((()=>{l.entity().children.length<r&&"none"===s.entity().style.display?s.show():l.entity().children.length==r&&"none"!==s.entity().style.display&&s.hide()})).observe(l.entity(),{attributes:!1,childList:!0,subtree:!0});for(let r=0;r<e;r++)l.appendContent(n.createFileElement(t,o).css("width","100%").css("padding-bottom","3px"));return i=n.create("div").appendContent(n.create("div",{style:n.objToStyle(a)}).appendContent(l).appendContent(s)),i.prop("container",i).prop("files",l).prop("addButton",s)},n.createMovableDiv=function(t){let e=n.create("div",{style:this.objToStyle({position:"absolute",height:"min-content",width:"min-content","min-height":"50px","min-width":"50px",margin:"0px",padding:"0px",border:"solid #ddd 1px","z-index":"50","box-sizing":"border-box","background-color":"#fff"})});return e.appendContent(n.create("div",{style:this.objToStyle({height:"20px",width:"20px",margin:"0px",padding:"0px",position:"absolute",right:"-21px",top:"-1px","border-top":"solid #ddd 1px","border-bottom":"solid #ddd 1px","border-right":"solid #ddd 1px",display:"flex","justify-content":"center","align-items":"center","font-size":"15px","box-sizing":"border-box",color:"inherit","background-color":"inherit"})}).appendContent("✖")).appendContent(n.create("div",{style:this.objToStyle({height:"20px",width:"20px",margin:"0px",padding:"0px",position:"absolute",right:"-21px",top:"-1px","box-sizing":"border-box"})}).addEventHandler("mouseover",(function(t){t.target.style.cursor="pointer"})).addEventHandler("mouseout",(function(t){t.target.style.cursor="default"})).addEventHandler("focus",(function(t){t.target.blur()})).addEventHandler("click",(t=>{e.remove()}))).appendContent(n.create("div",{style:this.objToStyle({height:"20px",width:"20px",margin:"0px",padding:"0px",position:"absolute",right:"-21px",top:"19px","border-right":"solid #ddd 1px","border-bottom":"solid #ddd 1px",display:"flex","justify-content":"center","align-items":"center","font-size":"15px","box-sizing":"border-box",color:"inherit","background-color":"inherit"})}).appendContent("✠")).appendContent(n.create("div",{style:this.objToStyle({height:"20px",width:"20px",margin:"0px",padding:"0px",position:"absolute",right:"-21px",top:"19px","box-sizing":"border-box"})}).addEventHandler("mouseover",(function(t){t.target.style.cursor="move"})).addEventHandler("mouseout",(function(t){t.target.style.cursor="default"})).addEventHandler("focus",(function(t){t.target.blur()})).drag(e)).appendContentIf(t,t),e},Object.defineProperty(n,"directions",{value:{up:0,right:1,down:2,left:3},writable:!1,configurable:!1,enumerable:!1}),n.createSplittedDiv=function(t,e,r,o){t=null==t?1:t,e=null==e?"50%":e,r=null!=r&&r,o=o||!1;let i,a=n.create("div",{style:n.objToStyle({padding:"0px",margin:"0px","box-sizing":"border-box",display:"flex","align-items":"stretch"})}).css("flex-flow",(t%2==0?"column":"row")+" nowrap").css("justify-content",t%3==0?"flex-end":"flex-start").css("flex-direction",(t%2==0?"column":"row")+(t%3==0?"-reverse":"")),l=n.create("div",{style:n.objToStyle({padding:"0px",margin:"0px","box-sizing":"border-box",overflow:"hidden"})}).css(t%2==0?"height":"width",e),s=n.create("div",{style:n.objToStyle({padding:"0px",margin:"0px","box-sizing":"border-box",flex:"1"})}),d=n.create("div",{style:n.objToStyle({padding:"0px",margin:"0px","box-sizing":"border-box",cursor:r?t%2==0?"row-resize":"col-resize":"unset","box-sizing":"border-box",border:"0px","background-image":"linear-gradient(to "+(t%2==0?"bottom":"right")+", #eee, #eee, #f5f5f5, #ffffff, #f5f5f5, #eee, #eee)"})}).css(t%2==0?"height":"width",r?"8px":"4px");if(r)if(0==o){let n=!1;d.addEventHandler("click",(r=>{n?l.css(t%2==0?"height":"width",e):l.css(t%2==0?"height":"width","0px"),n=!n}))}else d.addEventHandler("mousedown",(e=>{d.hold={},d.hold[t%2==0?"y":"x"]=t%2==0?e.clientY:e.clientX,n.get("html")[0].appendContent(i=n.create("div",{style:n.objToStyle({position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%","z-index":"9999"})}).addEventHandler(["mouseup","mouseleave"],(t=>{d.hold&&(d.hold=void 0,i.remove())})).addEventHandler("mousemove",(e=>{d.hold&&(l.css(t%2==0?"height":"width",l.entity()[t%2==0?"offsetHeight":"offsetWidth"]+(t%3==0?"-1":"1")*(t%2==0?e.clientY:e.clientX)-(t%3==0?"-1":"1")*d.hold[t%2==0?"y":"x"]+"px"),d.hold[t%2==0?"y":"x"]=t%2==0?e.clientY:e.clientX)})))}));return a.prop("a",l).prop("b",s).prop("divider",d).appendContent(l).appendContent(d).appendContent(s)},n.getStrParts=(t,e="`",n=1)=>{try{let r=(t,e,n)=>{let o=t.split(e.repeat(n));if(n>1){let t=[];for(let i=0;i<o.length;i++){let a=r(o[i],e,n-1);t.push(a)}return t}return o};return r(t,e,n)}catch(t){throw new Error("error caught @ getStrParts: "+t)}},n.splitString=(t,e=[" "])=>{try{let n=[],r=!1,o="";for(let i=0;i<t.length;i++){let a=t[i];!r&&e.includes(a)?""!==o&&(n.push(o),o=""):'"'===a?(r=!r,r||""===o||(n.push(o),o="")):o+=a}return""!==o&&n.push(o),n}catch(t){throw"@ splitString: "+t}},n.checkCriteria=(t,e,r,o)=>{try{let i=e=>{let r=e[0]?n.splitString(e[0],[" ",",","+","\t"]):[],i=e[1]?n.splitString(e[1],[" ",",","+","\t"]):[],a=!0;for(let e of i)if(a=a&&!o(t,e),!a)return!1;let l=0!==r.length;for(let e of r)if(l=l&&o(t,e),!l)return!1;return!0},a=n.getStrParts(e,r,2),l=!1;for(let t=0;t<a.length;t++)if(i(a[t])){l=!0;break}return l}catch(t){throw"@ checkCriteria: "+t}},n.match=function(t,e,r,o){let i=!1;try{return i=(null!=t||""===e)&&n.checkCriteria(t,e,r,o),i}catch(t){throw new Error("error caught @ match: "+t)}},n.matchText=function(t,e,r,o=!1,i="___"){let a=!1;try{return a=(null!=t||""===e)&&(e.trim().startsWith("regex:")?new RegExp(e.trim().substring(6)).test(t):n.checkCriteria(t,e,r,((t,e)=>e===i&&(null==t||""==t.trim())||-1!==(o?t:t.toUpperCase()).indexOf(o?e:e.toUpperCase())))),a}catch(t){throw new Error("error caught @ matchText: "+t)}},n.isIntersecting=function(t,e,n,r){if(!(t&&e&&n&&r))return!1;let[o,i]=e>t?[t,e]:[e,t],[a,l]=r>n?[n,r]:[r,n];return l>=o&&a<=i},n.isOverlapping=function(t,e,r,o){return t!=e&&r!=o&&n.isIntersecting(t,e,r,o)},n.createSelect=function(t){let e=n.create("select");if(t&&Array.isArray(t)&&t.length>0)for(let r=0;r<t.length;r++){let o=n.create("option");if("object"==typeof t[r]&&null!=t[r])for(let e in t[r])"content"===e?o.appendContent(t[r][e]):"value"===e?o.attr("value",t[r][e]):o.attr(e,t[r][e]);e.appendContent(o)}return e},n.getHierarchicalTree=function(t,e,n){const r=[],o=new Set;function i(r){return t.filter((t=>t[n]===r&&!o.has(t[e]))).map((t=>{o.add(t[e]);const r={...t,children:i(t[e])};return delete r[n],r}))}const a=new Set(t.map((t=>t[e])));return t.forEach((t=>{const l=t[n];null!==l&&a.has(l)||o.has(t[e])||r.push(...i(l))})),r},n.createMenu=function(t=[],e="label",r="handlers",o="children",i=0){if(!Array.isArray(t)||!e||""===e)throw new Error("Invalid input: trees must be an array, prop_label must be a non-empty string");let a=n.create("div"),l=function(t,i=0,a=250){let s=n.create("div",{class:"menu_branch"});if(!t||"object"!=typeof t)return s;let d,c,p=Array.isArray(t[o])&&t[o].length>0;if(d=n.create("div",{style:"position: relative;",class:"menu_unit menu_level_"+i}).appendContent(n.create("div").appendContent(t[e]??"---")).appendContent(n.create("div",{style:"position: absolute; left: 0px; top: 0px; height: 100%; width: 100%; z-index: 9999;"})).addEventHandlerIf("click",t[r],null,"function"==typeof t[r]).addEventHandlerIf("click",(function(){c.css("display","none"===c.css("display")?"unset":"none")}),null,p),"function"==typeof t[r]?d.addEventHandler("click",t[r],null):Array.isArray(t[r])&&d.countClicks(t[r],a),c=n.create("div",{class:"menu_children",style:"display:none;"}),p)for(let e of t[o])c.appendContent(l(e,i+1));return s.appendContent(d).appendContentIf(c,p)};for(let e of t)a.appendContent(l(e,0));return a},n.prototype.appendMovableDiv=function(t){return this.css("position","relative").appendContent(n.createMovableDiv(t)),this},n.prototype.entity=function(t){return null==t?this._entity:(this._entity=t,this)},n.prototype.parent=function(){return new n(this._entity.parentElement)},n.prototype.hide=function(){return this._entity&&this.css("display","none"),this},n.prototype.show=function(){return this._entity&&this.css("display","unset"),this},n.prototype.clear=function(){return this._entity&&(this._entity.innerHTML=""),this},n.prototype.fireEvent=function(t){return this._entity&&this._entity.dispatchEvent(new Event(t)),this},n.prototype.addEventHandler=function(t,e,n){try{let r=[];return this._eventListenerList=this._eventListenerList?this._eventListenerList:[],Array.isArray(t)?r=t:t&&(r=[...r,t]),r.forEach((t=>{if("string"!=typeof t)throw"invalid events in input list:"+r;this._entity.addEventListener(t,e,n),this._eventListenerList.push({type:t,listener:e,options:n})})),this}catch(t){throw"@ addEventHandler: "+t}},n.prototype.addEventHandlerIf=function(t,e,n,r){return r&&this.addEventHandler(t,e,n),this},n.prototype.removeAllEventHandlers=function(){return this._eventListenerList&&this._eventListenerList.length>0&&this._eventListenerList.forEach((t=>{this._entity.removeEventListener(t.type,t.listener,t.options)})),this._eventListenerList=void 0,this},n.prototype.content=function(t){return void 0===t?this._entity:(t&&this.clear().appendContent(t),this)},n.prototype.appendContent=function(t){try{if(null!=t)if("string"==typeof t)this._entity.append(t);else if("number"==typeof t)this._entity.append(t);else if(t instanceof HTMLElement)this._entity.appendChild(t);else{if(!(t instanceof n))throw"content must be a string or number or HTMLElement or Util";this.appendContent(t.entity())}}catch(e){throw"@ appendContent("+JSON.stringify(t)+"): "+e}return this},n.prototype.appendContentIf=function(t,e=!0){try{e&&this.appendContent(t)}catch(e){throw"@ appendContentIf("+t+"): "+e}return this},n.prototype.appendContentOf=function(t,e=function(t){return t},n=function(t){return!0}){try{for(let r of t)this.appendContentIf(e(r),n(r))}catch(e){throw"@ appendContentOf("+t+", "+func+"): "+e}},n.prototype.drag=function(t){let e;return this.addEventHandler("mousedown",(r=>{this.hold={},this.hold.x=r.clientX,this.hold.y=r.clientY,n.get("html")[0].appendContent(e=n.create("div",{style:n.objToStyle({position:"fixed",top:"0px",left:"0px",width:"100%",height:"100%","z-index":"9999"})}).addEventHandler(["mouseup","mouseleave"],(t=>{this.hold&&(this.hold=void 0,e.remove())})).addEventHandler("mousemove",(e=>{this.hold&&(t.css("left",t.entity().offsetLeft+e.clientX-this.hold.x+"px"),t.css("top",t.entity().offsetTop+e.clientY-this.hold.y+"px"),this.hold.x=e.clientX,this.hold.y=e.clientY)})))})),this},n.deferExec=function(t=100){return new Promise((e=>{let n=!1;setTimeout((()=>{n||(n=!0,e())}),t)}))},n.prototype.debounce=function(t,e){let n=this;return n["###timeout"]&&clearTimeout(n["###timeout"]),n["###timeout"]=setTimeout((async function(){await t.apply(n)}),e),this},n.prototype.countClicks=function(t=[],e){let n=this,r=0;return this.addEventHandler("click",(o=>{r++,this.debounce((()=>{t[r-1]&&t[r-1].apply(n,o),r=0}),e)})),this},n.prototype.holdClick=function(t,e){let n;return this.addEventHandler(["mousedown"],(r=>{clearTimeout(n),n=setTimeout((async()=>{await t(),clearTimeout(n)}),e)})),this.addEventHandler(["mouseup","mouseleave"],(t=>{n&&clearTimeout(n)})),this},n.prototype.repeat=function(t,e){let n=this;return t.apply(n),setInterval((function(){t.apply(n)}),e),this},n.prototype.idleControl=function(t,e,n,r){let o=!1,i=this;i.addEventHandler(t,(()=>{o&&(o=!1,"function"==typeof e&&e.apply(i))})).addEventHandler(t,i.debounce((()=>{o=!0,"function"==typeof n&&n()}),r))},n.prototype.appendSelect=function(t){return this.appendContent(n.createSelect(t))},n.prototype.preventDefault=function(t){return this.addEventHandler(t,(function(t){t.preventDefault()})),this},n.prototype.val=function(t){return void 0===t?this._entity?this._entity.value:void 0:(this._entity&&(this._entity.value=t),this)},n.prototype.class=function(t){return this._entity.className=t,this},n.prototype.addClass=function(t){return this._entity.classList.add(t),this},n.prototype.removeClass=function(t){return this._entity.classList.remove(t),this},n.prototype.containClass=function(t){return this._entity.classList.contains(t)},n.prototype.class=function(t){return this._entity.className=t,this},n.prototype.attr=function(t,e){return void 0===e?this._entity.getAttribute(t):("unset"==e?this._entity.removeAttribute(t):this._entity.setAttribute(t,e),this)},n.prototype.prop=function(t,e){return void 0===e?this[t]:(this[t]="unset"==e?void 0:e,this)},n.prototype.css=function(t,e){if(null==t)return this.attr("style");{this.attr("style",null==this.attr("style")?"":this.attr("style"));let r=n.styleToObj(this.attr("style"));return void 0===e?null==r?null:r[t]:("unset"==e?delete r[t]:r[t]=e,this.attr("style",n.objToStyle(r)),this)}},n.prototype.remove=function(){return this._entity.remove(),this._entity=void 0,this},n.prototype.noFocus=function(){return this.addEventHandler("focus",(t=>{this.entity().blur()})),this},n.prototype.commands=function(t,e){let n=[],r="",o=this;return"object"==typeof e&&(Array.isArray(e)?n=e:n.push(e),o.addEventHandler("keyup",(async e=>{if(e.target===o||"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName)if("Enter"==e.key)for(let t of n)["command","function"].every((e=>t.hasOwnProperty(e)))&&r.endsWith(t.command)&&await t.function();else r+=e.key,r.length>t&&(r=r.slice(1))}))),this},n.prototype.holdKeys=function(t,e=1e3){let n=this;n.keys=[],n.holding=!1;let r=Array.isArray(t)?t:[...t||[]],o=function(){let t=function(t){let e=[...t],n=e.pop();return e=[...e.sort(),...null!=n?[n]:[]],e};for(let e of r)null!=e&&null!=e.keySet&&null!=e.handler&&JSON.stringify(t(e.keySet))==JSON.stringify(t(n.keys))&&e.handler.apply(n)},i=function(){n.debounce((function(){n.keys=[]}),e)};return n.addEventHandler("keydown",(t=>{n.keys.indexOf(t.key)<0&&(n.keys=[...new Set([...n.keys,t.key])],n.holding=!0,o(),i())})).addEventHandler("keyup",(t=>{n.keys=n.keys.filter((e=>e!=t.key)),n.holding=0!=n.keys.length,o(),i()})),this},r.cleanKeys=function(t){try{return r.removeKeys(t,"###%")}catch(e){throw new Error("error caught @ removeKeys("+JSON.stringify(t)+"): "+e.toString())}},r.removeKeys=function(t,e){try{if(null!=t&&Array.isArray(t))if("string"==typeof e)if(e.endsWith("%")){let n=e.slice(0,-1);for(let e=0;e<t.length;e++)for(let r in t[e])r.startsWith(n)&&delete t[e][r]}else for(let n=0;n<t.length;n++)delete t[n][e];else{if(!Array.isArray(e))throw new Error("keys argument must be a string or an array of strings");for(let n=0;n<t.length;n++)for(let r=0;r<e.length;r++)if(e[r].endsWith("%")){let o=e[r].slice(0,-1);for(let e in t[n])e.startsWith(o)&&delete t[n][e]}else delete t[n][e[r]]}return t}catch(n){throw new Error("error caught @ removeKeys("+JSON.stringify(t)+", "+JSON.stringify(e)+"): "+n.toString())}};var o=window;for(var i in e)o[i]=e[i];e.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();